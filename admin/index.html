<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin</title>
  <style>
    :root { --bg:#0f1012; --text:#eaeaea; --muted:#9aa0a6; --btn:#d1a739; --btn2:#222327; }
    body{margin:0;background:#101114;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:980px;margin:2.5rem auto;padding:0 1rem}
    h1{margin:.25rem 0 1rem}
    p.muted{color:var(--muted)}
    .bar{display:flex;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1.25rem}
    .btn{appearance:none;border:0;border-radius:12px;padding:.6rem .9rem;font-weight:700;cursor:pointer}
    .btn-primary{background:var(--btn);color:#111}
    .btn-ghost{background:var(--btn2);color:#fff;border:1px solid #2e2f33}
    a.btn{display:inline-block;text-decoration:none}
    #nc-root{background:#111; border:1px solid #1f2024; border-radius:14px; overflow:hidden}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Admin</h1>
    <p class="muted">
      Upload photos in the <strong>Media Library</strong>. After publish/deploy, they appear on
      <a href="/gallery.html">Gallery</a>. Files are saved to <code>gallery/</code>.
    </p>

    <div class="bar">
      <a class="btn btn-primary" href="#/media">Open Media Library</a>
      <a class="btn btn-ghost" href="/gallery.html" target="_blank" rel="noopener">View Gallery</a>
      <a class="btn btn-ghost" href="/" rel="noopener">Back to Site</a>
      <button class="btn btn-ghost" id="logout-btn" hidden>Log out</button>
    </div>

    <div id="nc-root"></div>
  </div>

  <!-- Netlify Identity & CMS -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script src="https://unpkg.com/netlify-cms@^2/dist/netlify-cms.js"></script>

  <script>
    // Show "Log out" when authenticated
    (function () {
      const btn = document.getElementById('logout-btn');
      if (!window.netlifyIdentity || !btn) return;
      function toggle(user){ btn.hidden = !user; }
      netlifyIdentity.on('init', toggle);
      netlifyIdentity.on('login', user => { toggle(user); location.reload(); });
      netlifyIdentity.on('logout', () => { toggle(null); location.reload(); });
      btn.addEventListener('click', () => netlifyIdentity.logout());
    })();
  </script>
</body>
</html>
